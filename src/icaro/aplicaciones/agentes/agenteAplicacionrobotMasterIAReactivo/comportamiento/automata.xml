<?xml version="1.0"?>
<!DOCTYPE tablaEstados SYSTEM "schemas/TablaEstados.dtd">
<!-- para validacion manual:
<!DOCTYPE tablaEstados SYSTEM "../../../../../../schemas/TablaEstados.dtd">
No vamos a hacer terminar al agente, simplemente se quedara en alguno de los estados finales
 -->

<tablaEstados descripcionTabla="Tabla de estados de pruebas para comportamiento del Agente del MasterIA">
	<estadoInicial idInicial="estadoInicial">
		<transicion input="comenzar" accion="arranque" estadoSiguiente="estadoInicial1" modoDeTransicion="bloqueante"/>
	</estadoInicial>
        <estado idIntermedio="estadoInicial1">
		<transicion input="mandaEvaluacionATodos" accion="mandarEvalATodos" estadoSiguiente="esperaRespuestas" modoDeTransicion="bloqueante"/>
	</estado>
	<estado idIntermedio="esperaRespuestas">
		<transicion input="respuesta" accion="validaNumRespuestas" estadoSiguiente="esperaRespuestas" modoDeTransicion="bloqueante"/>
                <transicion input="yaTengoTodasLasRespuestasYNoSoyElMejor" accion="notificarMejor" estadoSiguiente="irObjOriginal" modoDeTransicion="bloqueante"/>
                <transicion input="yaTengoTodasLasRespuestasYSoyElMejor" accion="inicializarTimeOut" estadoSiguiente="esperaConfirmaciones" modoDeTransicion="bloqueante"/>
                <transicion input="yaTengoTodasLasRespuestasHayEmpate" accion="mandarNuevaEvaluacionAEmpatados" estadoSiguiente="esperaEvaluaciones" modoDeTransicion="bloqueante"/>
                <transicion input="5segSinRespuesta" accion="peticionRecibirRespuestasRestantes" estadoSiguiente="noTengoTodasLasRespuestas" modoDeTransicion="bloqueante"/>
	</estado>
        <estado idIntermedio="noTengoTodasLasRespuestas">
		<transicion input="respuesta" accion="validaNumRespuestas" estadoSiguiente="esperaRespuestas" modoDeTransicion="bloqueante"/>
                <transicion input="5segSinRespuesta" accion="peticionRecibirRespuestasRestantes" estadoSiguiente="noTengoTodasLasRespuestas" modoDeTransicion="bloqueante"/>
                <transicion input="timeOutYNoSoyElMejor" accion="notificarMejor" estadoSiguiente="irObjOriginal" modoDeTransicion="bloqueante"/>
                <transicion input="timeOutYSoyElMejor" accion="accionNula" estadoSiguiente="esperaConfirmaciones" modoDeTransicion="bloqueante"/>
                <transicion input="reenviaDatos" accion="reenviarDatos" estadoSiguiente="noTengoTodasLasRespuestas" modoDeTransicion="bloqueante"/>
	</estado>
        <estado idIntermedio="esperaConfirmaciones">
		<transicion input="confirmacion" accion="validaNumConfirmaciones" estadoSiguiente="esperaConfirmaciones" modoDeTransicion="bloqueante"/>
                <transicion input="yaTengoTodasLasConfirmaciones" accion="accionNula" estadoSiguiente="irObjNuevo" modoDeTransicion="bloqueante"/>
                <transicion input="reenviaDatos" accion="reenviarDatos" estadoSiguiente="esperaConfirmaciones" modoDeTransicion="bloqueante"/>
                <transicion input="5segSinRespuesta" accion="peticionRecibirConfirmacionesRestantes" estadoSiguiente="noTengoTodasLasConfirmaciones" modoDeTransicion="bloqueante"/>
	</estado>
        <estado idIntermedio="esperaEvaluaciones">
		<transicion input="nuevaEvaluacion" accion="validaNumEvaluaciones" estadoSiguiente="esperaEvaluaciones" modoDeTransicion="bloqueante"/>
                <transicion input="yaTengoTodasLasEvaluacionesYVoyYo" accion="accionNula" estadoSiguiente="irObjNuevo" modoDeTransicion="bloqueante"/>
                <transicion input="yaTengoTodasLasEvaluacionesYNoVoyYo" accion="notificarMejor" estadoSiguiente="irObjOriginal" modoDeTransicion="bloqueante"/>
                <transicion input="reenviaNuevaEvaluacion" accion="reenviarNuevaEvaluacion" estadoSiguiente="esperaEvaluaciones" modoDeTransicion="bloqueante"/>
                <transicion input="reenviaDatos" accion="reenviarDatos" estadoSiguiente="esperaEvaluaciones" modoDeTransicion="bloqueante"/>
                <transicion input="5segSinRespuesta" accion="peticionRecibirEvaluacionesRestantes" estadoSiguiente="noTengoTodasLasEvaluaciones" modoDeTransicion="bloqueante"/>
	</estado>
        <estado idIntermedio="noTengoTodasLasConfirmaciones">
		<transicion input="confirmacion" accion="validaNumConfirmaciones" estadoSiguiente="esperaConfirmaciones" modoDeTransicion="bloqueante"/>
                <transicion input="5segSinRespuesta" accion="peticionRecibirConfirmacionesRestantes" estadoSiguiente="noTengoTodasLasConfirmaciones" modoDeTransicion="bloqueante"/>
                <transicion input="timeOutYSoyElMejor" accion="accionNula" estadoSiguiente="irObjNuevo" modoDeTransicion="bloqueante"/>
                <transicion input="reenviaDatos" accion="reenviarDatos" estadoSiguiente="noTengoTodasLasConfirmaciones" modoDeTransicion="bloqueante"/>
	</estado>
        <estado idIntermedio="noTengoTodasLasEvaluaciones">
		<transicion input="nuevaEvaluacion" accion="validaNumEvaluaciones" estadoSiguiente="esperaEvaluaciones" modoDeTransicion="bloqueante"/>
                <transicion input="5segSinRespuesta" accion="peticionRecibirEvaluacionesRestantes" estadoSiguiente="noTengoTodasLasEvaluaciones" modoDeTransicion="bloqueante"/>
                <transicion input="timeOutYTengoMejorEvalNueva" accion="accionNula" estadoSiguiente="irObjNuevo" modoDeTransicion="bloqueante"/>
                <transicion input="reenviaNuevaEvaluacion" accion="reenviarNuevaEvaluacion" estadoSiguiente="noTengoTodasLasEvaluaciones" modoDeTransicion="bloqueante"/>
                <transicion input="reenviaDatos" accion="reenviarDatos" estadoSiguiente="noTengoTodasLasEvaluaciones" modoDeTransicion="bloqueante"/>
	</estado>
        <estado idIntermedio="irObjOriginal">
		<transicion input="respuesta" accion="accionNula" estadoSiguiente="irObjOriginal" modoDeTransicion="bloqueante"/>
                <transicion input="reenviaDatos" accion="reenviarDatos" estadoSiguiente="irObjOriginal" modoDeTransicion="bloqueante"/>
                <transicion input="reenviarConfirmacion" accion="reenviarConfirmacion" estadoSiguiente="irObjOriginal" modoDeTransicion="bloqueante"/>
                <transicion input="reenviaNuevaEvaluacion" accion="reenviarNuevaEvaluacion" estadoSiguiente="irObjOriginal" modoDeTransicion="bloqueante"/>
	</estado>
        <estado idIntermedio="irObjNuevo">
		<transicion input="respuesta" accion="accionNula" estadoSiguiente="irObjNuevo" modoDeTransicion="bloqueante"/>
                <transicion input="reenviaDatos" accion="reenviarDatos" estadoSiguiente="irObjNuevo" modoDeTransicion="bloqueante"/>
                <transicion input="reenviaNuevaEvaluacion" accion="reenviarNuevaEvaluacion" estadoSiguiente="irObjNuevo" modoDeTransicion="bloqueante"/>
	</estado>
	<estadoFinal idFinal="terminado"/>
	<transicionUniversal input="termina" accion="terminacion" estadoSiguiente="terminado" modoDeTransicion="bloqueante"/>
	<transicionUniversal input="error" accion="clasificaError" estadoSiguiente="tratamientoErrores" modoDeTransicion="bloqueante"/>
</tablaEstados>